<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tecverde</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Flowbite -->
    <link
      href="https://cdn.jsdelivr.net/npm/flowbite@3.1.2/dist/flowbite.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/flowbite@3.1.2/dist/flowbite.min.js"></script>

    <!-- jQuery e Inputmask -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/5.0.8/jquery.inputmask.min.js"></script>
  </head>

  <body class="bg-gray-100 p-10">
    <form class="max-w-sm mx-auto bg-white p-6 rounded-xl shadow" id="form">
      <!-- CPF -->
      <div class="mb-5">
        <label
          for="cpf"
          class="block mb-2 text-sm font-medium text-gray-900"
          >Solicitante (CPF)</label
        >
        <input
          type="text"
          id="cpf"
          maxlength="14"
          class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
          placeholder="000.000.000-00"
          required
        />
      </div>

      <!-- Select com busca -->
      <div class="mb-5">
        <label
          for="search-select"
          class="block mb-2 text-sm font-medium text-gray-900"
          >Obra</label
        >
        <div class="relative">
          <input
            type="text"
            id="search-select"
            placeholder="Digite para buscar..."
            class="block w-full p-2.5 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 
                   focus:ring-blue-500 focus:border-blue-500"
            required
          />
          <ul
            id="options-list"
            class="absolute z-10 w-full bg-white border border-gray-300 rounded-lg mt-1 hidden 
                   max-h-40 overflow-y-auto"
          ></ul>
        </div>
        <p id="obra-error" class="mt-1 text-sm text-red-600 hidden">
          Selecione uma obra válida.
        </p>
      </div>

      <!-- Accordion de Equipamentos de Proteção -->
      <div
        id="accordion-card"
        data-accordion="collapse"
        class="mt-5 mb-6 rounded-lg border border-gray-200 overflow-hidden bg-white"
      >
        <h2 id="accordion-card-heading-1">
          <button
            type="button"
            class="flex items-center justify-between w-full p-5 font-medium rtl:text-right text-gray-900 hover:bg-gray-50 gap-3"
            data-accordion-target="#accordion-card-body-1"
            aria-expanded="false"
            aria-controls="accordion-card-body-1"
          >
            <div class="flex items-center gap-3">
              <img
                src="https://cdn-icons-png.freepik.com/256/516/516260.png?semt=ais_white_label"
                alt="EPIs"
                class="w-8 h-8"
              />
              <span class="text-sm text-gray-900"> EPI's</span>
            </div>

            <svg
              data-accordion-icon
              class="w-5 h-5 shrink-0"
              aria-hidden="true"
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              fill="none"
              viewBox="0 0 24 24"
            >
              <path
                stroke="currentColor"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="m5 15 7-7 7 7"
              />
            </svg>
          </button>
        </h2>

        <div
          id="accordion-card-body-1"
          class="hidden border-t border-gray-200"
          aria-labelledby="accordion-card-heading-1"
        >
          <div class="p-4 md:p-5">
            <ul
              class="flex flex-col items-start select-none w-full text-sm font-medium text-heading bg-neutral-primary-soft border border-default rounded-base"
            >
              <li class="w-full border-b border-default last:border-b-0">
                <label
                  for="capacete-checkbox"
                  class="flex items-center justify-between w-full p-3 cursor-pointer hover:bg-gray-50"
                >
                  <div class="flex items-center">
                    <input
                      id="capacete-checkbox"
                      type="checkbox"
                      class="w-4 h-4 border border-default-medium rounded-xs bg-neutral-secondary-medium focus:ring-2 focus:ring-brand-soft"
                    />
                    <span class="ms-2 text-sm font-medium text-heading"
                      >Capacete de Segurança</span
                    >
                  </div>
                  <img
                    src="https://soluwan.com.br/wp-content/uploads/2021/09/CAPACETE-DE-SEGURANCA-AMARELO-PRO-SAFETY-1.png"
                    class="w-20 h-20 rounded-md"
                  />
                </label>
              </li>

              <li class="w-full border-b border-default last:border-b-0">
                <label
                  for="luva-checkbox"
                  class="flex items-center justify-between w-full p-3 cursor-pointer hover:bg-gray-50"
                >
                  <div class="flex items-center">
                    <input
                      id="luva-checkbox"
                      type="checkbox"
                      class="w-4 h-4 border border-default-medium rounded-xs bg-neutral-secondary-medium focus:ring-2 focus:ring-brand-soft"
                    />
                    <span class="ms-2 text-sm font-medium text-heading"
                      >Luva Pigmentada Preta</span
                    >
                  </div>
                  <img
                    src="https://fken.vtexassets.com/arquivos/ids/281457/luva-malha-preta-pigmentada-tam-9g-kala.jpg?v=638555611517870000"
                    class="w-20 h-20 rounded-md"
                  />
                </label>
              </li>

              <li class="w-full">
                <label
                  for="botina-checkbox"
                  class="flex items-center justify-between w-full p-3 cursor-pointer hover:bg-gray-50"
                >
                  <div class="flex items-center">
                    <input
                      id="botina-checkbox"
                      type="checkbox"
                      class="w-4 h-4 border border-default-medium rounded-xs bg-neutral-secondary-medium focus:ring-2 focus:ring-brand-soft"
                    />
                    <span class="ms-2 text-sm font-medium text-heading"
                      >Botina Biqueira de Aço</span
                    >
                  </div>
                  <img
                    src="https://encrypted-tbn2.gstatic.com/shopping?q=tbn:ANd9GcTZXrN-uqH5DoLDuYglbdJb1pp53IHzSH3P4fWJyan6LCBfzur6iFH_ZjWygyTb1YhEqipo2DGmkC9gwOeDxfGnF-zVWqiGEgXqJUC2Gt2t1ac2N-4WdNLj"
                    class="w-20 h-20 rounded-md"
                  />
                </label>

                <!-- Seletor de tamanhos (oculto por padrão) -->
                <div id="tamanhos-container" class="hidden px-4 pb-4">
                  <select
                    id="tamanho-botina"
                    class="block w-full p-2 mb-6 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500"
                  >
                    <option selected disabled>Selecione o tamanho</option>
                    <option value="36">36</option>
                    <option value="37">37</option>
                    <option value="38">38</option>
                    <option value="39">39</option>
                    <option value="40">40</option>
                    <option value="41">41</option>
                    <option value="42">42</option>
                    <option value="43">43</option>
                    <option value="44">44</option>
                    <option value="45">45</option>
                  </select>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Accordion s -->
      <div
        id="accordion-uniformes"
        data-accordion="collapse"
        class="mb-6 rounded-lg border border-gray-200 overflow-hidden bg-white"
      >
        <h2 id="accordion-uniformes-heading">
          <button
            type="button"
            class="flex items-center justify-between w-full p-5 font-medium rtl:text-right text-gray-900 hover:bg-gray-50 gap-3"
            data-accordion-target="#accordion-uniformes-body"
            aria-expanded="false"
            aria-controls="accordion-uniformes-body"
          >
            <div class="flex items-center gap-3">
              <img
                src="https://static.vecteezy.com/ti/vetor-gratis/p1/19052694-de-contorno-do-icone-de-camisa-de-futebol-design-uniforme-vetor.jpg"
                alt="Uniformes"
                class="w-8 h-8 object-cover"
              />
              <span class="text-sm text-gray-900">Uniformes</span>
            </div>

            <svg
              data-accordion-icon
              class="w-5 h-5 shrink-0"
              aria-hidden="true"
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              fill="none"
              viewBox="0 0 24 24"
            >
              <path
                stroke="currentColor"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="m5 15 7-7 7 7"
              />
            </svg>
          </button>
        </h2>

        <div
          id="accordion-uniformes-body"
          class="hidden border-t border-gray-200"
          aria-labelledby="accordion-uniformes-heading"
        >
          <div class="p-4 md:p-5">
            <!-- Conteúdo duplicado (você pode trocar pelos itens  depois) -->
            <ul
              class="flex flex-col items-start select-none w-full text-sm font-medium text-heading bg-neutral-primary-soft border border-default rounded-base"
            >
              <li class="w-full border-b border-default last:border-b-0">
                <label
                  for="uniforme-item-1"
                  class="flex items-center justify-between w-full p-3 cursor-pointer hover:bg-gray-50"
                >
                  <div class="flex items-center">
                    <input
                      id="uniforme-item-1"
                      type="checkbox"
                      class="w-4 h-4 border border-default-medium rounded-xs bg-neutral-secondary-medium focus:ring-2 focus:ring-brand-soft"
                    />
                    <span class="ms-2 text-sm font-medium text-heading"
                      >Camiseta</span
                    >
                  </div>
                </label>
              </li>

              <li class="w-full border-b border-default last:border-b-0">
                <label
                  for="uniforme-item-2"
                  class="flex items-center justify-between w-full p-3 cursor-pointer hover:bg-gray-50"
                >
                  <div class="flex items-center">
                    <input
                      id="uniforme-item-2"
                      type="checkbox"
                      class="w-4 h-4 border border-default-medium rounded-xs bg-neutral-secondary-medium focus:ring-2 focus:ring-brand-soft"
                    />
                    <span class="ms-2 text-sm font-medium text-heading"
                      >Calça </span
                    >
                  </div>
                </label>
              </li>

              <li class="w-full">
                <label
                  for="uniforme-item-3"
                  class="flex items-center justify-between w-full p-3 cursor-pointer hover:bg-gray-50"
                >
                  <div class="flex items-center">
                    <input
                      id="uniforme-item-3"
                      type="checkbox"
                      class="w-4 h-4 border border-default-medium rounded-xs bg-neutral-secondary-medium focus:ring-2 focus:ring-brand-soft"
                    />
                    <span class="ms-2 text-sm font-medium text-heading"
                      >Jaqueta </span
                    >
                  </div>
                </label>
              </li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Botão -->
      <button
        type="submit"
        class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm w-full px-5 py-2.5 text-center"
      >
        Solicitar
      </button>
    </form>

    <script>
      // Máscara de CPF
      $("#cpf").inputmask("999.999.999-99");

      const obras = [
        "Alphaville Castello - L11",
        "Alphaville Castello - K18",
        "Andaluz - Fábrica",
        "Andaluz - Obra",
        "Aripuanã - Obra",
        "Capivari - Obra",
      ];

      const input = document.getElementById("search-select");
      const list = document.getElementById("options-list");
      const errorMsg = document.getElementById("obra-error");

      // Função que mostra lista filtrada
      function mostrarOpcoes(filtro = "") {
        list.innerHTML = "";
        const filtradas = obras.filter((obra) =>
          obra.toLowerCase().includes(filtro.toLowerCase())
        );

        if (filtradas.length === 0) {
          list.classList.add("hidden");
          return;
        }

        list.classList.remove("hidden");
        filtradas.forEach((obra) => {
          const li = document.createElement("li");
          li.textContent = obra;
          li.className = "p-2 cursor-pointer hover:bg-blue-100 rounded";
          li.addEventListener("click", () => {
            input.value = obra;
            list.classList.add("hidden");
            input.classList.remove("border-red-500");
            errorMsg.classList.add("hidden");
          });
          list.appendChild(li);
        });
      }

      // Mostra opções ao digitar
      input.addEventListener("input", () => {
        mostrarOpcoes(input.value);
      });

      // Mostra todas as opções ao focar o campo
      input.addEventListener("focus", () => {
        mostrarOpcoes();
      });

      // Fecha lista ao clicar fora
      document.addEventListener("click", (e) => {
        if (
          !e.target.closest("#search-select") &&
          !e.target.closest("#options-list")
        ) {
          list.classList.add("hidden");
        }
      });

      // Validação ao sair do campo
      input.addEventListener("blur", () => {
        setTimeout(() => {
          if (!obras.includes(input.value)) {
            input.classList.add("border-red-500");
            errorMsg.classList.remove("hidden");
          } else {
            input.classList.remove("border-red-500");
            errorMsg.classList.add("hidden");
          }
        }, 150);
      });

      // Impede envio se obra for inválida
      document.getElementById("form").addEventListener("submit", (e) => {
        if (!obras.includes(input.value)) {
          e.preventDefault();
          input.classList.add("border-red-500");
          errorMsg.classList.remove("hidden");
        }
      });

      const botinaCheckbox = document.getElementById("botina-checkbox");
      const tamanhosContainer = document.getElementById("tamanhos-container");

      if (botinaCheckbox) {
        botinaCheckbox.addEventListener("change", () => {
          if (botinaCheckbox.checked) {
            tamanhosContainer.classList.remove("hidden");
          } else {
            tamanhosContainer.classList.add("hidden");
          }
        });
      }
    </script>
  </body>
</html>
